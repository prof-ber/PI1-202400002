<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vitrine da Mente</title>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="stylesheet" href="jogo.css">
</head>
<body>
    <a href="#conteudo" class="skip-link">Ir para o conte√∫do principal</a>
    <div id="conteudo"></div>
    <div class="header">
        <img src="..\assets\brain-clip-art.svg" alt="logo" id="logo">
        <h1>Vitrine da Mente</h1>
    </div>
    <div class="nav">
        <a href="index.html">In√≠cio</a>
            <a href="profissionais.html">Profissionais</a>
            <a href="jogo.html">Jogo da mem√≥ria</a>
            <a href="simples.html">P√°gina simples</a>
            <a href="palestras.html">Palestras</a>
    </div>
  
    <div id="app"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        const figuras = ['../assets/beach-tennis_1.jpg',"../assets/basquete.webp","../assets/handebol.jpg",
        "../assets/golfe.jpg","../assets/caf√©.jpg","../assets/atividade fisica.jpg",
        "../assets/caminhada.webp","../assets/futsal.jpg","../assets/quiropraxia.jpg",
        "../assets/boliche.jpg","../assets/hidroginastica.jpeg","../assets/video games.jpg",
        "../assets/leitura.jpg","../assets/pilates.jpg","../assets/ouvir musica.webp",
        "../assets/massagem.jpg","../assets/volei.jpg","../assets/ciclismo.webp"];
        const descricoes = ["Beach tennis combina exerc√≠cio e divers√£o, promove um bom condicionamento f√≠sico e relaxamento na praia.",
        "Basquete √© √≥timo para sa√∫de, aumenta resist√™ncia, coordena√ß√£o e sociabilidade, fortalece m√∫sculos e ossos.",
        "Handebol melhora cardio, circula√ß√£o, tonifica m√∫sculos e aprimora coordena√ß√£o.",
        "Golfe ensina concentra√ß√£o, precis√£o, encoraja criatividade e pensamento criativo.",
        "Polifen√≥is no caf√© reduz inflama√ß√µes, melhoram o humor, reduz ansiedade e promove concentra√ß√£o e mem√≥ria.",
        "Atividade f√≠sica acalma e reorganiza pensamentos e emo√ß√µes, melhora o foco e controle da ansiedade.",
        "Caminhada reduz estresse e ansiedade, melhora autoestima, reduz o horm√¥nio do estresse.",
        "Esportes em equipe como o futsal, traz sensa√ß√£o de bem-estar, e melhora a autoestima.",
        "Quiropraxia melhora bem-estar geral, reduz estresse, melhora  a qualidade do sono.",
        "Boliche relaxa mente e corpo, libera endorfina para reduzir estresse e regular horm√¥nios.",
        "Hidrogin√°stica: Exerc√≠cio na √°gua para sa√∫de e bem-estar.",
        "Video games s√£o entretenimento interativo, oferece divers√£o e desafio.",
        "A leitura √© um exerc√≠cio mental que envolve imagina√ß√£o, aprendizagem e estimula o c√©rebro.",
        "Pilates reduz fadiga, sintomas de depress√£o e ansiedade, e aumenta disposi√ß√£o.",
        "Ouvir m√∫sica reduz ansiedade, aumenta a dopamina, melhora comunica√ß√£o.",
        "Massagens relaxam corpo e mente, trazendo  mais conforto.",
        "V√¥lei promove bem-estar mental, melhora concentra√ß√£o, al√©m de facilitar socializa√ß√£o.",
        "Ciclismo beneficia a sa√∫de, melhora o humor, alivia a ansiedade, aumenta a autoestima."];
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        function inicializarBaralho() {
            const baralho = [];
            let grupo = 0;
            figuras.forEach((figura, index) => {
                baralho.push({ id: index * 2, content: figura, matched: false, pairIndex: 0, group: grupo});
                baralho.push({ id: index * 2 + 1, content: descricoes[index], matched: false, pairIndex: 1, group: grupo});
                grupo++;
            });
            shuffleArray(baralho);
            return baralho;
        }
        function App() {
            const [cards, setCards] = useState(inicializarBaralho());
            const [cartasViradas, setCartasViradas] = useState([]);
            const [matches, setMatches] = useState([]);

            useEffect(() => {
                if (cartasViradas.length === 2) {
                    const match = cartasViradas[0].group === cartasViradas[1].group;
                    if (match) {
                        const newMatches = [...matches, cartasViradas[0].group]; // Store matched groups instead of content
                        setMatches(newMatches);
                        setCartasViradas([]);
                    } else {
                        setTimeout(() => setCartasViradas([]), 1000);
                    }
                }
            }, [cartasViradas, matches]);

            const handleClick = (id) => {
                const card = cards.find(card => card.id === id);
                if (cartasViradas.length < 2 && !cartasViradas.find(c => c.id === id)) {
                    setCartasViradas([...cartasViradas, card]);
                }
            };

            const resetGame = () => {
                setCards(inicializarBaralho());
                setCartasViradas([]);
                setMatches([]);
            };

            const isVictory = matches.length === figuras.length;

            const inicializarJogo = () => {
                return cards.map((card) => (
                    <Card
                        key={card.id}
                        id={card.id}
                        figura={card.content}
                        isMatched={matches.includes(card.group)} // Check if the card's group is in the matches array
                        isFlipped={cartasViradas.some(carta => carta.id === card.id) || matches.includes(card.group)} // Adjust flip condition
                        handleClick={handleClick}
                        group={card.group}
                    />
                ));
        };

            return (
                <>
                    <div className="jogo">
                        {inicializarJogo()}
                    </div>
                    {isVictory && (
                        <div className="victory-overlay">
                            <div className="victory-message">Parab√©ns! Voc√™ venceu!</div>
                            <button onClick={resetGame} className="reset-button">Reiniciar Jogo</button>
                        </div>
                    )}
                </>
            );
        }

    function Card({ figura, isMatched, handleClick, id, isFlipped, pairIndex }) {
        const isImage = /\.(jpg|jpeg|png|webp)$/.test(figura);
        return(
            <div className={`card ${isFlipped || isMatched ? 'flipped' : ''} pair-${pairIndex}`} onClick={() => handleClick(id)}>
                {isFlipped || isMatched ? (
                    isImage ? <img src={figura} alt="Card image" className="card-image"/> : <span className="content">{figura}</span>
                ) : (
                    <span className="content">ü§î</span>
                )}
            </div>
        );
    }

        ReactDOM.render(<App />, document.getElementById('app'));
    </script>
</body>
</html>