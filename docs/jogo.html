<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="stylesheet" href="jogo.css">
</head>
<body>
    <div id="app"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;
        const figuras = [ 'PI/PI1-202400002/assets/beach-tennis_1.jpg',"PI/PI1-202400002/assets/basquete.webp","PI/PI1-202400002/assets/handebol.jpg","PI/PI1-202400002/assets/golfe.jpg","C:/Users/eminem.7994/Desktop/aiai/PI/PI1-202400002/assets/café.jpg","😢","😡","😱","😴","😷","🤯","🥳","🥺","😇","🤖","👽","👻","🐱"];
        const descricoes = ["Jogar beach tennis proporciona uma mistura singular de atividade física,diversão e interação social. Alguns benefícios incluem aprimoramento da coordenação, condicionamento físico, agilidade e habilidades motoras, além de ser uma excelente forma de aproveitar o ar livre e relaxar na praia", "Jogar basquete é uma excelente forma de exercício que oferece uma variedade de benefícios. Ele melhora a saúde cardiovascular, aumenta a resistência, promove a coordenação e agilidade, fortalece os músculos e ossos, além de ser uma ótima maneira de desenvolver habilidades sociais, como trabalho em equipe e comunicação", "O handebol melhora o desempenho cardiorespiratório e a circulação sanguínea, tonifica a musculatura do corpo inteiro, aprimora a coordenação motora", "O golfe é um esporte que visa ensinar concentração e precisão, ao mesmo tempo que encoraja a criatividade e o pensamento criativo.", "", "chorando", "zangado", "assustado", "dormindo", "doente", "cabeça explodindo", "comemorando", "implorando", "angelical", "robô", "alienígena", "fantasma", "gato"];
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        function inicializarBaralho() {
            const baralho = [];
            let grupo = 0;
            figuras.forEach((figura, index) => {
                baralho.push({ id: index * 2, content: figura, matched: false, pairIndex: 0, group: grupo});
                baralho.push({ id: index * 2 + 1, content: descricoes[index], matched: false, pairIndex: 1, group: grupo});
                grupo++;
            });
            shuffleArray(baralho);
            return baralho;
        }
        function App() {
            const [cards, setCards] = useState(inicializarBaralho());
            const [cartasViradas, setCartasViradas] = useState([]);
            const [matches, setMatches] = useState([]);

            useEffect(() => {
                if (cartasViradas.length === 2) {
                    const match = cartasViradas[0].group === cartasViradas[1].group;
                    if (match) {
                        const newMatches = [...matches, cartasViradas[0].group]; // Store matched groups instead of content
                        setMatches(newMatches);
                        setCartasViradas([]);
                    } else {
                        setTimeout(() => setCartasViradas([]), 1000);
                    }
                }
            }, [cartasViradas, matches]);

            const handleClick = (id) => {
                const card = cards.find(card => card.id === id);
                if (cartasViradas.length < 2 && !cartasViradas.find(c => c.id === id)) {
                    setCartasViradas([...cartasViradas, card]);
                }
            };

            const resetGame = () => {
                setCards(inicializarBaralho());
                setCartasViradas([]);
                setMatches([]);
            };

            const isVictory = matches.length === figuras.length;

            const inicializarJogo = () => {
                return cards.map((card) => (
                    <Card
                        key={card.id}
                        id={card.id}
                        figura={card.content}
                        isMatched={matches.includes(card.group)} // Check if the card's group is in the matches array
                        isFlipped={cartasViradas.some(carta => carta.id === card.id) || matches.includes(card.group)} // Adjust flip condition
                        handleClick={handleClick}
                        group={card.group}
                    />
                ));
        };

            return (
                <>
                    <div className="jogo">
                        {inicializarJogo()}
                    </div>
                    {isVictory && (
                        <div className="victory-overlay">
                            <div className="victory-message">Parabéns! Você venceu!</div>
                            <button onClick={resetGame} className="reset-button">Reiniciar Jogo</button>
                        </div>
                    )}
                </>
            );
        }

        function Card({ figura, isMatched, handleClick, id, isFlipped, pairIndex }) {
            return(
                <div className={`card ${isFlipped || isMatched ? 'flipped' : ''} pair-${pairIndex}`} onClick={() => handleClick(id)}>
                    {isFlipped || isMatched ? figura : '🤔'}
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('app'));
    </script>
</body>
</html>